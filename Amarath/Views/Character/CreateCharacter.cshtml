@model Amarath.DAL.Models.CharacterViewModel;

@{
    ViewData["Title"] = "CreateCharacter";
    Layout = "~/Views/Shared/_Layout.cshtml";
    
}

<div class="container">
    <div class="row page-header"><h2>Create Your Character</h2></div>
    <form method="post">
        <div class="row">
            <div class="col-sm-5 col-md-5">
                <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="false">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner" role="listbox">
                        <div class="item active">
                            <img src="https://www.macmillandictionary.com/external/slideshow/full/Grey_full.png" alt="...">
                            <div class="carousel-caption">
                                <h4>Warrior</h4>
                                <h6>Rah!</h6>
                            </div>
                        </div>
                        <div class="item">
                            <img src="https://www.macmillandictionary.com/external/slideshow/full/Grey_full.png" alt="...">
                            <div class="carousel-caption">
                                <h4>Archer</h4>
                                <h6>Whoosh</h6>
                            </div>
                        </div>
                        <div class="item">
                            <img src="https://www.macmillandictionary.com/external/slideshow/full/Grey_full.png" alt="...">
                            <div class="carousel-caption">
                                <h4>Mage</h4>
                                <h6>*Twinkle*</h6>
                            </div>
                        </div>
                        <div class="item">
                            <img src="https://www.macmillandictionary.com/external/slideshow/full/Grey_full.png" alt="...">
                            <div class="carousel-caption">
                                <h4>Rogue</h4>
                                <h6>...</h6>
                            </div>
                        </div>
                    </div>
                    <!-- Controls -->
                    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="col-sm-7 col-md-7">
                <div class="well">
                    <div class="row">
                        <div class="col-sm-7 col-md-7">
                            <label asp-for="Name">Name</label>
                            <input type="text" asp-for="Name" class="form-control" />
                        </div>
                        <div class="col-sm-5 col-md-5">
                            <label asp-for="Rank">Rank</label>
                            <input type="text" asp-for="Rank" class="form-control text-center" value="1" disabled />
                        </div>
                    </div>
                    <div class="row">
                        <h3><span class="label label-default col-sm-2 col-md-2" id="pointCount">10</span></h3>
                        <div class="col-sm-10 col-md-10">
                            <div class="progress">
                                <div class="progress-bar" id="pointBar" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="10" style="width: 100%;"></div>
                            </div>
                        </div>
                    </div>
                    <table class="table">
                        <tr>
                            <th class="col-sm-10 col-md-10">Points Assigned</th>
                            <th class="col-sm-1 col-md-1">Points</th>
                            <th class="col-sm-1 col-md-1">Skill Name</th>
                        </tr>
                        <tr>
                            <td>
                                <button type="button" class="btn col-sm-1 col-md-1" id="decStrength" onclick="updateSkill(this.id);" asp-action="decStrength"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></button>
                                <div class="col-sm-9 col-md-9">
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" id="StrengthBar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn col-sm-1 col-md-1" id="incStrength" onclick="updateSkill(this.id);"><span class="text-center glyphicon glyphicon-chevron-right" aria-hidden="true"></span></button>
                            </td>
                            <td><input type="text" asp-for="Strength" id="Strength" class="form-control text-center" value="0" disabled/></td>
                            <td>Strength</td>
                        </tr>
                        <tr>
                            <td>
                                <button type="button" class="btn col-sm-1 col-md-1" id="decDexterity" onclick="updateSkill(this.id);"><span class="text-center glyphicon glyphicon-chevron-left" aria-hidden="true"></span></button>
                                <div class="col-sm-9 col-md-9">
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" id="DexterityBar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn col-sm-1 col-md-1" id="incDexterity" onclick="updateSkill(this.id);"><span class="text-center glyphicon glyphicon-chevron-right" aria-hidden="true"></span></button>
                            </td>
                            <td><input type="text" asp-for="Dexterity" class="form-control text-center" value="0" disabled /></td>
                            <td>Dexterity</td>
                        </tr>
                        <tr>
                            <td>
                                <button type="button" class="btn col-sm-1 col-md-1" id="decIntelligence" onclick="updateSkill(this.id);"><span class="text-center glyphicon glyphicon-chevron-left" aria-hidden="true"></span></button>
                                <div class="col-sm-9 col-md-9">
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" id="IntelligenceBar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn col-sm-1 col-md-1" id="incIntelligence" onclick="updateSkill(this.id);"><span class="text-center glyphicon glyphicon-chevron-right" aria-hidden="true"></span></button>
                            </td>
                            <td><input type="text" class="form-control text-center" id="Intelligence" value="0" disabled /></td>
                            <td>Intelligence</td>
                        </tr>
                        <tr>
                            <td>
                                <div class="col-sm-1 col-md-1"></div>
                                <div class="col-sm-9 col-md-9">
                                    <div class="progress" id="health">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
                                    </div>
                                </div>
                                <div class="col-sm-1 col-md-1"></div>
                            </td>
                            <td><input type="text" asp-for="Health" class="form-control text-center" value="100" disabled /></td>
                            <td>Health</td>
                        </tr>
                    </table>
                    <!--
                    <p class="lead">Skills</p>
                    <div id="SkillsTable">
                        <div class="media">
                            <div class="media-left">
                                <img class="media-object" src="...">
                            </div>
                            <div class="media-body">
                                Skill description
                            </div>
                        </div>
                    </div>
                    -->
                </div>
            </div>
        </div>
        <div class="row">
            <input class="btn btn-primary pull-right" type="submit" style="margin-right:1em;" asp-area="" asp-controller="Character" asp-action="CreateCharacter"/>
        </div>
    </form>
</div>

<script type="text/javascript">
    var maxNewPoints = 20;
    window.onload = function () {
      $("#pointCount").text(Number(maxNewPoints));
    };

    function updateSkill(id) {
        var command = id.split(/(?=[A-Z])/);
        var operator = command[0];
        var skill = "#" + command[1];

        // Increment or Decrement skill points
        if (operator == "inc" && ($(skill).val() < 100) && (Number($("#pointCount").text()) > 0) ){
            $(skill).val(Number($(skill).val()) + 1);
            $("#pointCount").text( Number($("#pointCount").text()) - 1 );
        }
        else if (operator == "dec" && ($(skill).val() > 0) && (Number($("#pointCount").text()) < maxNewPoints)){
            $(skill).val(Number($(skill).val()) - 1);
            $("#pointCount").text( Number($("#pointCount").text()) + 1 );
        }

        // Update total points available
        $("#pointBar").attr("aria-valuenow", Number($("#pointCount").text()));
        $("#pointBar").attr("style", "width:" + (Number($("#pointCount").text()) / maxNewPoints)*100 + "%;");

        // Update input element values
        $(skill+"Bar").attr("aria-valuenow", $(skill).val());
        $(skill+"Bar").attr("style", "width:"+$(skill).val()+"%;");
    }

</script>
